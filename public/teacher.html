<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>BYTEWEBNEST · Teacher</title>
  <style>
    body {
      background:#0f0a1a;
      color:#e8e0ff;
      font-family: monospace;
      padding:20px;
    }
    textarea {
      width:100%;
      height:60vh;
      background:#0b0616;
      color:#e8e0ff;
      border:1px solid #7b2ff7;
      padding:15px;
      font-size:16px;
    }
    button {
      margin-top:15px;
      padding:12px 20px;
      font-size:16px;
      background:#7b2ff7;
      color:#fff;
      border:none;
      border-radius:8px;
      cursor:pointer;
    }
  </style>
</head>
<body>

<h1>BYTEWEBNEST · Teacher</h1>

<textarea id="editor">
<h1>Привет, BYTEWEBNEST</h1>
<p>Сегодня изучаем &lt;details&gt;</p>

<details>
  <summary>Что это?</summary>
  <p>Раскрываемый блок</p>
</details>
</textarea>

<button id="publish">Publish</button>

<script>
  const ws = new WebSocket("wss://bwn-live-lesson.onrender.com");
  const editor = document.getElementById("editor");
  const btn = document.getElementById("publish");

  ws.onopen = () => {
    console.log("Teacher WS connected");
  };

  btn.onclick = () => {
    if (ws.readyState !== WebSocket.OPEN) {
      alert("WS not connected yet");
      return;
    }

    ws.send(JSON.stringify({
      type: "publish",
      lessonId: "lesson-1",
      key: "bwn-live-2025",
      html: editor.value
    }));
  };
</script>

</body>
</html>
