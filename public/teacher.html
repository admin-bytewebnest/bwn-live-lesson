<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>BYTEWEBNEST Â· Teacher</title>

  <!-- CodeMirror -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5/lib/codemirror.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5/theme/material-darker.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5/addon/hint/show-hint.css">

  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/lib/codemirror.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/mode/xml/xml.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/mode/css/css.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/mode/htmlmixed/htmlmixed.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/addon/edit/closetag.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/addon/edit/closebrackets.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/addon/hint/show-hint.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/addon/hint/html-hint.js"></script>

  <style>
    body {
      margin: 0;
      background: #0f0a1a;
      color: #fff;
      font-family: system-ui;
    }

    header {
      padding: 14px;
      text-align: center;
      font-weight: bold;
      background: linear-gradient(90deg, #7b2ff7, #c09bff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 20px;
    }

    .editor-wrap {
      padding: 12px;
    }

    .CodeMirror {
      height: 60vh;
      font-size: 15px;
      border-radius: 10px;
    }

    button {
      margin-top: 10px;
      width: 100%;
      padding: 12px;
      font-size: 16px;
      background: #7b2ff7;
      border: none;
      border-radius: 10px;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background: #9f6bff;
    }
  </style>
</head>
<body>

<header>BYTEWEBNEST Â· Live Lesson Â· Teacher</header>

<div class="editor-wrap">
  <textarea id="editor">
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Demo</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: Arial;
    }
    h1 {
      color: #7b2ff7;
    }
  </style>
</head>
<body>

<h1>Hello BYTEWEBNEST</h1>
<p>Live coding Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ðŸš€</p>

</body>
</html>
  </textarea>

  <button id="publish">ÐžÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ñ‚ÑŒ ÐºÐ¾Ð´</button>
</div>

<script>
  const cm = CodeMirror.fromTextArea(
    document.getElementById("editor"),
    {
      mode: "htmlmixed",
      theme: "material-darker",
      lineNumbers: true,
      autoCloseTags: true,
      autoCloseBrackets: true,
      extraKeys: {
        "Ctrl-Space": "autocomplete",
        "Tab": "autocomplete"
      }
    }
  )

  const ws = new WebSocket("wss://bwn-live-lesson.onrender.com")

  ws.onopen = () => {
    console.log("WS connected (teacher)")
  }

  document.getElementById("publish").onclick = () => {
    ws.send(JSON.stringify({
      type: "publish",
      lessonId: "lesson-1",
      key: "bwn-live-2025",
      html: cm.getValue()
    }))
  }
</script>

</body>
</html>
